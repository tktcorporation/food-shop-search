# バグ修正プロンプトテンプレート

このテンプレートを使用して、バグの修正をClaude Codeに依頼してください。

## テンプレート

```markdown
<bug_report>
## 問題の説明
[バグの簡潔な説明]

## 再現手順
1. [ステップ1]
2. [ステップ2]
3. [ステップ3]

## 期待する動作
[本来どうあるべきか]

## 実際の動作
[現在何が起こっているか]

## エラーメッセージ（あれば）
```
[エラーログやスタックトレース]
```
</bug_report>

<instructions>
まず <thinking> タグ内で以下を分析してください：
1. バグの根本原因
2. 影響範囲
3. 修正アプローチの選択肢

その後、<answer> タグ内で修正を実装してください。
</instructions>

<context>
関連するファイル：
- [ファイルパス]: [役割]

最近の変更：
[このバグに関連する可能性のある最近のコミットや変更]
</context>

<constraints>
- 既存の機能に影響を与えない
- パフォーマンスを劣化させない
- TypeScript型安全性を維持
- [その他の制約]
</constraints>

<verification>
修正後、以下を確認してください：
- [ ] バグが修正されている
- [ ] 同様のエッジケースでも問題がない
- [ ] 既存のテストが通る
- [ ] TypeScriptエラーがない
- [ ] ビルドが成功する
</verification>
```

## 使用例

```markdown
<bug_report>
## 問題の説明
レストラン検索で「営業中のみ」フィルターを有効にしても、
閉店中のレストランが表示される

## 再現手順
1. トップページで「現在地から検索」を選択
2. 検索オプションで「営業中のみ表示」をオン
3. 検索を実行
4. 結果に閉店中のレストランが含まれる

## 期待する動作
営業中のレストランのみが表示される

## 実際の動作
閉店中のレストランも結果に含まれている

## エラーメッセージ（あれば）
コンソールにエラーはなし。ただし、営業時間の判定がスキップされている様子。
</bug_report>

<instructions>
まず <thinking> タグ内で以下を分析してください：
1. useOperatingHours.ts の営業時間判定ロジック
2. フィルターが正しく適用されているか
3. タイムゾーンや時刻の扱いに問題がないか

その後、<answer> タグ内で修正を実装してください。
</instructions>

<context>
関連するファイル：
- src/composables/useOperatingHours.ts: 営業時間フィルターロジック
- src/composables/useRestaurantSearch.ts: レストラン検索のメイン処理
- src/utils/operatingHours.ts: 営業時間関連のユーティリティ

最近の変更：
先週、タイムゾーン処理を修正するコミットがありました。
その際に営業時間の判定ロジックに影響があった可能性があります。
</context>

<constraints>
- Google Maps APIから取得する営業時間データの形式を維持
- 深夜営業（0時を跨ぐ営業時間）も正しく扱う
- ユーザーの現在時刻を正確に取得
- パフォーマンスに影響を与えない
</constraints>

<verification>
修正後、以下を確認してください：
- [ ] 営業中のレストランのみが表示される
- [ ] 深夜営業の店舗も正しく判定される
- [ ] タイムゾーンが異なる場合も正しく動作
- [ ] 営業時間情報がないレストランの扱いが適切
- [ ] 既存のテストが通る
- [ ] TypeScriptエラーがない
</verification>
```
